@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --pokedex-color: #8b0000;
  --loading-color: #303030;
  --border-dark: #404040;
  --bg-dark: #202020;
  --bg-darker: #181818;
  --bg-screen: #9bbc0f;
  --text-dark: #0f380f;
  --shadow-inset: inset -2px -2px 0 0 #000, inset 2px 2px 0 0 #404040;
  --shadow-inset-reverse: inset 2px 2px 0 0 #000, inset -2px -2px 0 0 #404040;
}

@layer base {
  body {
    @apply m-0 min-h-screen text-white;
    @apply [image-rendering:pixelated] [-webkit-font-smoothing:none] [-moz-osx-font-smoothing:none];
  }
}

.pokedex-container {
  @apply min-h-[100dvh] w-full p-0 sm:p-5;
  @apply flex justify-center items-start sm:items-center;
  @apply overflow-y-auto overflow-x-hidden;
}

.pokedex {
  @apply flex flex-col md:flex-row gap-2.5 w-full p-4 rounded-none sm:rounded-lg;
  @apply bg-[var(--pokedex-color)] [image-rendering:pixelated];
  @apply [box-shadow:var(--shadow-inset)];
  @apply sm:max-w-[1000px];
  @apply my-auto;
}

.pokedex-left,
.pokedex-right {
  @apply flex-1 p-4 rounded bg-[var(--pokedex-color)] [box-shadow:var(--shadow-inset)];
}

.pokedex-right {
  @apply flex flex-col;
  @apply h-full;
}

@media (max-width: 767px) {
  .pokedex-right {
    height: calc(100dvh - 520px);
    min-height: 400px;
  }
}

@media (min-width: 768px) {
  .pokedex-right {
    height: auto;
    min-height: 600px;
    max-height: 700px;
  }
}

.loading-item {
  @apply flex items-center gap-2 p-2 rounded bg-[var(--loading-color)];
}

.loading-text {
  @apply flex-1 h-3 rounded bg-[var(--bg-dark)] opacity-50;
}

.top-controls {
  @apply flex justify-between mb-4;
}

.control-group {
  @apply flex gap-3 items-center;
}

.search-container {
  @apply relative flex items-center;
  position: relative;
  z-index: 20;
}

.search-input {
  @apply h-[44px] px-3 py-2 text-sm bg-[var(--bg-dark)] text-white;
  @apply border-2 border-[var(--border-dark)] rounded-t;
  @apply absolute ml-2 min-w-[300px];
  @apply focus:outline-none focus:border-[var(--bg-screen)];
  @apply [box-shadow:var(--shadow-inset)];
  transition: all 0.2s ease-in-out;
  right: -320px;
}

@media (min-width: 768px) {
  .search-input {
    right: auto;
    left: 100%;
  }
}

.search-suggestions {
  @apply absolute ml-2 w-[300px];
  @apply top-[44px] max-h-[300px] overflow-y-auto;
  @apply bg-[var(--bg-dark)] rounded-b;
  @apply border-2 border-t-0 border-[var(--border-dark)];
  right: -320px;
  z-index: 19;
}

@media (min-width: 768px) {
  .search-suggestions {
    right: auto;
    left: 100%;
  }
}

.search-suggestion-item {
  @apply flex items-center gap-2 px-3 py-2 cursor-pointer;
  @apply text-sm text-white hover:bg-[var(--border-dark)];
  @apply border-b border-[var(--border-dark)];
  min-height: 44px;
}

.search-suggestion-item:last-child {
  @apply border-b-0;
}

.search-suggestion-item.selected {
  @apply bg-[var(--border-dark)];
}

@media (max-width: 767px) {
  .search-input,
  .search-suggestions {
    @apply absolute top-full left-0 mt-2;
    @apply w-[calc(100vw-2rem)];
  }
  .search-suggestions {
    @apply mt-[calc(0.5rem+44px)];
  }
}

.control-button.search-button {
  @apply text-lg font-bold;
  min-width: 44px;
  width: 44px;
  padding: 0;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  box-shadow: none;
}

.search-button .poke-ball-icon {
  width: 32px;
  height: 32px;
  display: block;
  image-rendering: pixelated;
}

.control-button.search-button.active {
  background: none;
  box-shadow: none;
}

.control-button,
.sprite-button {
  @apply py-3 px-4 text-sm cursor-pointer text-white border-0;
  @apply bg-[var(--bg-dark)] [box-shadow:var(--shadow-inset)];
  @apply touch-manipulation select-none;
  min-height: 44px;
  min-width: 84px;
}

.control-button:is(:active, .active),
.sprite-button:is(:active, .active) {
  @apply bg-[var(--border-dark)] [box-shadow:var(--shadow-inset-reverse)];
}

.screen-container {
  @apply rounded p-4 mb-4 border-8 border-[var(--border-dark)] bg-[var(--bg-darker)];
  @apply [box-shadow:var(--shadow-inset)];
}

.screen {
  @apply w-full max-w-[300px] aspect-square mx-auto;
  @apply flex justify-center items-center rounded overflow-hidden;
  @apply transition-colors duration-300 sm:w-full sm:max-w-none;
  @apply bg-[var(--bg-screen)] [box-shadow:inset_0_0_10px_rgba(0,0,0,0.3)];
}

.loading-screen {
  @apply fixed inset-0 flex items-center justify-center;
  @apply bg-[var(--bg-screen)];
  @apply [image-rendering:pixelated];
  @apply [-webkit-font-smoothing:none] [-moz-osx-font-smoothing:none];
  z-index: 9999;
}

.loading-screen::before {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.1);
}

.loading-gif {
  max-width: min(320px, 90vmin);
  width: 100%;
  aspect-ratio: 1/1;
  pointer-events: none;
  display: block;
  object-fit: contain;
  @apply [image-rendering:pixelated];
}

@keyframes loading-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

.loading-gif:not([src*="data:"]) {
  animation: loading-bounce 1s ease-in-out infinite;
}

.pokemon-sprite {
  @apply max-w-full max-h-full scale-[2];
  @apply [image-rendering:pixelated];
}

.loading-wrapper {
  position: relative;
  width: 64px;
  height: 64px;
  margin: 0 auto;
}

.sprite-controls {
  @apply grid gap-3 p-3 rounded bg-[var(--bg-dark)];
  @apply grid-cols-[repeat(auto-fill,minmax(80px,1fr))] [box-shadow:var(--shadow-inset)];
}

.pokemon-list {
  @apply rounded p-4 overflow-y-auto bg-[var(--bg-dark)] [box-shadow:var(--shadow-inset)];
  @apply w-full max-w-full flex-1;
  @apply md:h-[400px];
}

.pokemon-list-item {
  @apply p-3 flex items-center gap-3 text-sm cursor-pointer;
  @apply border-b-2 border-[var(--border-dark)];
  min-height: 44px;
  position: relative;
  width: 100%;
}

.pokemon-list-item:last-child {
  @apply border-b-0;
}

.pokemon-list-item.selected {
  @apply text-white bg-[var(--border-dark)];
}

.pokemon-list-item:hover:not(.selected) {
  @apply bg-[#303030];
}

.pokemon-icon {
  @apply w-8 h-8 [image-rendering:pixelated];
  flex-shrink: 0;
}

.pokemon-list-item span {
  @apply truncate;
  flex: 1;
  min-width: 0;
}

.description-container {
  @apply mt-4 p-2.5 rounded bg-[var(--bg-dark)] [box-shadow:var(--shadow-inset)];
}

.description-box {
  @apply p-4 rounded min-h-[80px] text-sm leading-normal;
  @apply bg-[var(--bg-screen)] transition-colors duration-300;
}

.pokemon-description {
  @apply m-0 text-[var(--text-dark)];
}

.color-controls,
.generation-select {
  @apply mb-4 p-2 rounded bg-[var(--bg-dark)];
  @apply [box-shadow:var(--shadow-inset)];
}

.color-controls {
  @apply flex flex-col;
}

.color-controls > label {
  @apply text-[10px] font-bold mb-2 font-mono;
}

.color-control-items {
  @apply flex justify-start gap-2;
  width: fit-content;
}

.color-control-item {
  @apply flex items-center gap-1;
  min-width: max-content;
}

.color-control-item span {
  @apply text-[10px] font-mono;
}

.color-controls input[type="color"] {
  @apply w-10 h-6 cursor-pointer p-0.5;
  @apply [background:none] [border:2px_solid_var(--border-dark)] rounded;
}

.generation-select label {
  @apply block text-[10px] font-bold mb-1 font-mono;
}

.generation-select select {
  @apply w-32 p-2 text-sm rounded bg-[var(--bg-dark)] text-white border-2 border-[var(--border-dark)];
  @apply appearance-none cursor-pointer font-mono;
  min-height: 44px;
}

.generation-select select option {
  @apply bg-[var(--bg-dark)] text-white;
}

.pokemon-list-ul {
  @apply list-none m-0 p-0;
}

@layer utilities {
  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-[var(--bg-darker)];
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-[var(--border-dark)] border-2 border-[var(--bg-darker)];
  }
}
